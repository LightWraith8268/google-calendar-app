# Google Calendar App\n\nA feature-rich Google Calendar client with persistent authentication (no re-login every month) and full event management capabilities.\n\n## Features\n\n✅ **Persistent Authentication** - Sign in once per month (not every day like Google Calendar)\n✅ **Full Event Management** - Create, edit, and delete events\n✅ **Multiple Calendars** - View and manage multiple Google Calendars\n✅ **All-day Events** - Support for all-day events and timed events\n✅ **Event Details** - Location, description, and attendee information\n✅ **Offline Support** - Local caching with IndexedDB\n✅ **GitHub Pages Hosting** - Free deployment to GitHub Pages\n✅ **Secure Backend** - Supabase Edge Functions with encrypted token storage\n\n## Architecture\n\n```\nGitHub Pages (Frontend)\n         ↓\nSupabase Edge Functions (Backend)\n         ↓\nGoogle Calendar API\n```\n\n### Tech Stack\n\n- **Frontend**: React 18 + TypeScript + Vite\n- **Backend**: Supabase Edge Functions (Deno)\n- **Database**: Supabase PostgreSQL with RLS\n- **Storage**: IndexedDB (client-side caching)\n- **Hosting**: GitHub Pages (frontend) + Supabase (backend)\n- **Auth**: Supabase Auth with Google OAuth\n\n## Setup Instructions\n\n### 1. Prerequisites\n\n- Node.js 18+ installed\n- A Supabase project (https://supabase.com)\n- A Google Cloud project with Calendar API enabled\n- GitHub account\n\n### 2. Google Cloud Setup\n\n1. Go to [Google Cloud Console](https://console.cloud.google.com)\n2. Create a new project\n3. Enable the **Google Calendar API**\n4. Create OAuth 2.0 credentials:\n   - Application type: Web application\n   - Authorized redirect URIs:\n     - `http://localhost:3000/google-calendar-app/callback` (development)\n     - `https://LightWraith8268.github.io/google-calendar-app/callback` (production)\n5. Copy your **Client ID**\n\n### 3. Supabase Configuration\n\nYour Supabase project already has the necessary tables and edge functions from the `calendar-file-uploader` project.\n\nAdd your Google OAuth credentials:\n1. Go to Supabase Authentication → Providers\n2. Enable Google provider\n3. Add your Google OAuth credentials (Client ID, Client Secret)\n\n### 4. Local Development\n\n```bash\n# Clone the repository\ngit clone https://github.com/LightWraith8268/google-calendar-app.git\ncd google-calendar-app\n\n# Install dependencies\nnpm install\n\n# Create .env.local file\ncp .env.example .env.local\n\n# Edit .env.local with your credentials\n# VITE_GOOGLE_CLIENT_ID=your_client_id_from_google_cloud\n# VITE_SUPABASE_URL=your_supabase_project_url\n# VITE_SUPABASE_ANON_KEY=your_supabase_anon_key\n\n# Start development server on http://localhost:3000\nnpm run dev\n```\n\n### 5. GitHub Actions Setup\n\n1. Go to your repository Settings → Secrets and variables → Actions\n2. Add these repository secrets:\n   - `VITE_GOOGLE_CLIENT_ID`\n   - `VITE_SUPABASE_URL`\n   - `VITE_SUPABASE_ANON_KEY`\n\n3. Enable GitHub Pages:\n   - Go to Settings → Pages\n   - Source: Deploy from a branch\n   - Branch: gh-pages\n\n### 6. Deploy to GitHub Pages\n\nSimply push to the `main` branch:\n\n```bash\ngit push origin main\n```\n\nGitHub Actions will:\n1. Build the app\n2. Deploy to GitHub Pages\n3. Available at: https://LightWraith8268.github.io/google-calendar-app\n\n## How to Use\n\n### First Time\n\n1. Visit https://LightWraith8268.github.io/google-calendar-app\n2. Click \"Sign in with Google\"\n3. Authorize the app to access your Google Calendar\n4. Your calendars will load automatically\n\n### Create Event\n\n- Click \"+ New Event\" or click a date on the calendar\n- Fill in title, time, location, description\n- Click \"Save Event\"\n\n### Edit Event\n\n- Click an event on the calendar\n- Click \"Edit\"\n- Modify details\n- Click \"Save Event\"\n\n### Delete Event\n\n- Click an event on the calendar\n- Click \"Delete\"\n- Confirm deletion\n\n## Token Refresh Flow\n\nWhy you only need to login ~once per month:\n\n1. Google OAuth provides both an **access token** (expires in 1 hour) and a **refresh token** (valid for ~6 months)\n2. Your refresh token is securely stored in Supabase PostgreSQL (encrypted)\n3. Access tokens are automatically refreshed using the refresh token when needed\n4. You only re-authenticate when the refresh token expires (~6 months) or needs to be refreshed (~1 month of inactivity)\n5. This is handled automatically by the backend edge functions\n\n## Environment Variables\n\n```env\n# Google OAuth (from Google Cloud Console)\nVITE_GOOGLE_CLIENT_ID=your_client_id_here\n\n# Supabase (from Supabase project settings)\nVITE_SUPABASE_URL=https://your-project.supabase.co\nVITE_SUPABASE_ANON_KEY=your_anon_key_here\n\n# Automatically set by vite.config.ts\nVITE_GOOGLE_REDIRECT_URI=http://localhost:3000/google-calendar-app/callback\n```\n\n## File Structure\n\n```\nsrc/\n├── components/\n│   ├── CalendarGrid.tsx       # Month view calendar\n│   ├── EventForm.tsx          # Create/edit event form\n│   ├── EventDetail.tsx        # Event view/delete\n├── hooks/\n│   ├── useCalendarEvents.ts   # Fetch events hook\n│   ├── useIndexedDB.ts        # IndexedDB cache hook\n├── lib/\n│   ├── supabase.ts            # Supabase client setup\n│   ├── calendar-api.ts        # Google Calendar API calls\n├── types/\n│   └── index.ts               # TypeScript interfaces\n├── App.tsx                    # Main app component\n└── index.css                  # Global styles\n```\n\n## Troubleshooting\n\n### \"Google Calendar not connected\"\n- Solution: Sign in again with Google\n- Check that Supabase Google OAuth provider is configured\n\n### \"Failed to refresh token\"\n- Your refresh token has expired (> 6 months)\n- Solution: Sign in again with Google\n\n### Events not loading\n- Verify you've selected a calendar from the dropdown\n- Check Google Calendar API is enabled in Google Cloud\n- Try refreshing the page\n\n### Build fails\n- Ensure all environment variables are set\n- Run `npm install` to get all dependencies\n- Check Node.js version is 18+\n\n## Security Notes\n\n- ✅ Refresh tokens stored encrypted in Supabase PostgreSQL\n- ✅ Row-level security (RLS) ensures users only see their own events\n- ✅ All API calls proxied through edge functions (no direct API access from frontend)\n- ✅ No sensitive tokens in browser local storage\n- ✅ HTTPS required for production\n\n## Limitations\n\n- Recurring events display but complex edits limited\n- Timezones use browser timezone\n- Attendee responses managed through Google Calendar\n\n## Future Features\n\n- [ ] Week and day view options\n- [ ] Event search/filtering\n- [ ] Advanced recurring event support\n- [ ] Event reminders\n- [ ] Dark mode\n- [ ] Multi-language support\n\n## License\n\nMIT License\n"